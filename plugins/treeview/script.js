(function(d){d.extend(d.fn,{treeView:function(b){function h(a,e){function c(f){var i="<ul>";d.each(f,function(m,g){i+='<li><div class="'+(g[0]?"hitarea collapsed":"placeholder")+'"><div class="arrow"/><div class="'+g[1]+'"/></div><a href="'+g[2]+'">'+g[3]+"</a></li>"});i+="</ul>";e==b.root&&a.empty();a.children("ul").remove();a.removeClass("wait").append(i);j(a)}if(a.children("ul").length!=0)a.children("ul").show();else{a.addClass("wait");d.ajax({url:b.url,data:{dir:e},dataType:"json",type:"GET",
success:c})}}function k(a){return b.store&&d.inArray(a,d.store.get(b.store,[]))>=0}function l(a,e){if(b.store){var c=d.store.get(b.store,[]);if(e)d.inArray(a,c)<0&&c.push(a);else c=d.grep(c,function(f){return f!=a});d.store.set(b.store,c)}}function j(a){a.find("li > .hitarea").click(function(){var e=d(this),c=e.parent(),f=c.children("a").attr("href");if(e.hasClass("collapsed")){h(c,f);e.removeClass("collapsed").addClass("expanded")}else{c.children("ul").hide();e.removeClass("expanded").addClass("collapsed")}l(f,
e.hasClass("expanded"));return false}).each(function(){var e=d(this),c=e.parent(),f=c.children("a").attr("href");if(k(f)){h(c,f);e.removeClass("collapsed").addClass("expanded")}})}b||(b={});if(!b.root)b.root="/";if(!b.url)b.url="/sys/treeview.json";this.each(function(){h(d(this),b.root)})}})})(jQuery);$(function(){if($.browser.mozilla||$.browser.safari){sidebar=$("#sidebar");sidebar.html('<div id="treeview-tabs"><ul><li class="tabs-selected"><a href="#sidebar-menu">Menu</a></li><li><a href="#sidebar-treeview">Tree</a></li></ul></div><div id="sidebar-treeview"><h1>Tree</h1><div id="treeview"></div></div><div id="sidebar-menu">'+sidebar.html()+"</div>");$("#treeview-tabs").tabs({store:"treeview-tabs"});$("#treeview").treeView({store:"treeview"})}});
